<!DOCTYPE html>
<html>
<head>
  <title>Chat Registration</title>
</head>
<body>
  <h2>Enter Password to Access Chat</h2>
  <input type="password" id="passwordInput" placeholder="Password" />
  <button onclick="checkPassword()">Enter</button>

  <p id="error" style="color:red;"></p>

  <script>
    let passwordMap = {};

    fetch('passwords.json')
      .then(res => {
        if (!res.ok) throw new Error('Failed to load passwords');
        return res.json();
      })
      .then(data => {
        passwordMap = data;
      })
      .catch(() => {
        document.getElementById('error').textContent = 'Error loading passwords file.';
      });

    function checkPassword() {
      const pass = document.getElementById('passwordInput').value.trim();
      const page = passwordMap[pass];
      const errorElem = document.getElementById('error');

      if (page) {
        window.location.href = page;
      } else {
        errorElem.textContent = 'Incorrect password.';
      }
    }
  </script>
</body>
</html>
